\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{biblatex-btxlike}[2024/12/26 v1.0.3 A biblatex style mimicking BibTeX output]

% Load necessary packages or settings
\RequirePackage[
  backend=biber,
  style=alphabetic,
  isbn=false,
  doi=false,
  url=true,
  giveninits=true
]{biblatex}

\renewbibmacro{in:}{%
\ifentrytype{article}{}{\printtext{\bibstring{in}\addspace}}}

\DeclareFieldFormat[article,inbook,incollection,inproceedings,patent,thesis,unpublished]{title}{#1}

\DeclareFieldFormat[online]{title}{%
  \iffieldequalstr{entrysubtype}{article}
  {#1}              % Article-like formatting (roman, no quotes)
  {\mkbibemph{#1}}  % Book-like formatting (italic)
}

\DeclareFieldFormat{edition}{#1 edition}

\AtEveryBibitem{%
  \ifentrytype{book}{
    \clearfield{pages}%
  }{}
}

\renewcommand{\subtitlepunct}{\itshape\addcolon\addspace}

\DeclareFieldFormat{url}{Available at \url{#1}}

\DeclareFieldFormat[article]{pages}{#1}

\renewcommand\bibpagespunct{%
  \ifentrytype{article}{\addcolon}{\addcomma\space}%
}

\RequirePackage{xpatch}
\xpatchbibdriver{incollection}{%
  \newunit\newblock%
  \usebibmacro{chapter+pages}%
}{}{}{}

\xpatchbibdriver{incollection}{%
  \usebibmacro{series+number}%
}{%
  \usebibmacro{series+number}%
  \newunit\newblock%
  \usebibmacro{chapter+pages}%
}{}{}

\xpatchbibdriver{inproceedings}{%
  \newunit\newblock%
  \usebibmacro{chapter+pages}%
}{}{}{}

\xpatchbibdriver{inproceedings}{%
  \usebibmacro{byeditor+others}%
}{%
  \usebibmacro{byeditor+others}%
  \newunit\newblock%
  \usebibmacro{chapter+pages}%
}{}{}

\xpatchbibmacro{note+pages}{%
  \printfield{pages}%
}{%
  \printfield{pages}%
  \setunit{\addcomma\addspace}%
  \usebibmacro{date}%
}{}{}

\xpatchbibmacro{journal+issuetitle}{%
  \usebibmacro{journal}%
  \setunit*{\addspace}%
}{%
  \usebibmacro{journal}%
  \setunit*{\addcomma\addspace}%
}{}{}

\xpatchbibmacro{volume+number+eid}{%
  \setunit*{\adddot}%
  \printfield{number}%
  \setunit{\bibeidpunct}%
}{%
  \printfield[parens]{number}%
  \setunit{\addcolon}%
}{}{}

\renewbibmacro{issue+date}{}

\xpatchbibdriver{online}{%
  \usebibmacro{date}%
}{%
  \iffieldequalstr{entrysubtype}{book}{%
    \printfield{edition}%
    \newunit\newblock%
  }{}%
  \usebibmacro{date}
}{}{}%

% End of style definition
\endinput
